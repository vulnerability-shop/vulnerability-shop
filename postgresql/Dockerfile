# syntax=docker/dockerfile:1

FROM postgres:alpine3.17

ENV POSTGRES_USER admin
ENV POSTGRES_PASSWORD admin
ENV POSTGRES_DB ecommerce

COPY ./migrations/*.sql /docker-entrypoint-initdb.d/

# Copy the CSV files, script file, sets permissions and runs the script
COPY ./migrations/*.csv /tmp/
COPY import.sh /docker-entrypoint-initdb.d/
RUN chmod +x /docker-entrypoint-initdb.d/import.sh

EXPOSE 5432

CMD ["postgres"] 
