import random
import json
from locust import FastHttpUser
from config import config


def get_items_page(http: FastHttpUser, page: int = -1, size: int = 10):
    if page == -1:
        page = random.randint(1, 1000 / size)

    url = f'{config["catalog"]["host"]}/getItems?page={page}&size={size}'
    with http.rest(method="GET", url=url) as response:
        if response.js is not None:
            items = json.loads(response.text)['data']
            return items


def get_all_items(http: FastHttpUser):
    url = f'{config["catalog"]["host"]}/getItems'
    with http.rest(method="GET", url=url) as response:
        if response.js is not None:
            items = json.loads(response.text)
            return items
