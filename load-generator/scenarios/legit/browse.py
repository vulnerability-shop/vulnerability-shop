import random
from common.user import random_login
from common.catalog import get_items_page
from locust import FastHttpUser, task, run_single_user
from config import config


class BrowseScenario(FastHttpUser):

    host = config["catalog"]["host"]

    @task
    def main(self):
        # Login
        random_login(self)

        # Fetch random pages
        pages = random.randint(1, 10)
        for _ in range(pages):
            get_items_page(self)


if __name__ == '__main__':
    run_single_user(BrowseScenario)
