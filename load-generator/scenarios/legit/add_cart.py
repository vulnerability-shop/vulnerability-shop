import random
from common.user import random_login
from common.cart import add_to_cart_random, clear_cart
from locust import FastHttpUser, task, run_single_user


class AddCartScenario(FastHttpUser):

    @task
    def main(self):
        auth = random_login(self)
        nb_items = add_to_cart_random(self, auth)
        print(f"Successfully logged in and added: {nb_items} random items to cart")
        if random.randint(0, 1) == 1:
            clear_cart(self, auth)

if __name__ == '__main__':
    run_single_user(AddCartScenario)


