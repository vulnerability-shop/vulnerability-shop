from random import randint

from locust import FastHttpUser, task, run_single_user

from config import config


class GetUserInfoScenario(FastHttpUser):

    host = config["user"]["host"]

    @task
    def direct_object_reference(self):
        user_id = randint(1, 2000)  # Possibility of getting an invalid id
        with self.rest("GET", f"/getUser?id={user_id}") as response:
            if response.status_code != 200:
                response.failure(f"Failed Direct Object Reference: {response.text}")


if __name__ == "__main__":
    run_single_user(GetUserInfoScenario)
