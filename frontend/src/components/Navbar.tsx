import { useEffect, useState, MouseEvent, MouseEventHandler } from 'react';
import { Link, useNavigate } from 'react-router-dom';

function Navbar() {
  const [loggedIn, setLoggedIn] = useState(false);
  const navigate = useNavigate();

  useEffect(() => {
    if (localStorage.getItem('username') !== null) {
      setLoggedIn(true);
    }
  });

  const handleLogoutClick = (event: MouseEvent<HTMLAnchorElement>) => {
    event.preventDefault();
    localStorage.removeItem('username');
    navigate(0);
  };

  return (
    <div className="navbar border-b-[1px]">
      <div className="flex-1">
        <a className="btn btn-ghost normal-case text-xl">Vulnerability Shop</a>
      </div>
      <div className="flex-none">
        <ul className="menu menu-horizontal px-1">
          <li>
            <Link to="/">Home</Link>
          </li>
          {!loggedIn && (
            <li>
              <Link to="/login">Login</Link>
            </li>
          )}
          {loggedIn && (
            <li>
              <Link onClick={handleLogoutClick} to="/">
                Logout
              </Link>
            </li>
          )}
        </ul>
      </div>
      <div className="relative h-32 w-32"></div>
        <a className="absolute top-0 right-0 h-16 w-16" href="../pages/Cart.tsx">  
          <img src="/cartImg.png"/>
        </a>
      </div>     
  );
}

export default Navbar;
