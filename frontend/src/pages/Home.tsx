import { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";

interface item {
  id: number;
  name: string;
  description: string;
  image: string;
  price: number;
  stock: number;
}

function Home() {
  const itemsMock = [
      {
        name: "DaJuicer",
        description: "Big Juicer hours",
        image: "pepeMeltdown.jpg",
        price: 420.69,
        stock: 999
      },

      {
        name: "McGooser",
        description: "Big McGooser hours",
        image: "pepeClap.jpg",
        price: 111,
        stock: 222
      }
    ];

  let items: item[] = [];
  const [error, setError] = useState('');
  //const navigate = useNavigate();

  useEffect(() => {
    getItems();
  });

  const getItems = async () => {
    try {
      const response = await fetch('http://127.0.0.1:5181/getItems');
      
      if (response.status == 200) {
        items = await response.json();
      }
    } catch (error) {
      setError('We are currently experiencing technical difficulties, please try again later');
    }
  }
  
  return (
    <div>
      <table>
        <tr>
          <th>Name</th>
          <th>Price</th>
          <th>Stock</th>
        </tr>
      {itemsMock.map((item) => (
            <tr>
              <td>{item.name}</td>
              <td>{item.price}</td>
              <td>{item.stock}</td>
            </tr>
          ))}        
      </table>
    </div>
  ); 
}

export default Home;
